import type { Executor } from "edgedb";
import { Expression, ExpressionKind, ParamType, Cardinality, ScalarType, ArrayType, setToTsType, TypeSet } from "../reflection";
export declare type $expr_OptionalParam<Type extends ParamType = ParamType> = {
    __kind__: ExpressionKind.OptionalParam;
    __type__: Type;
};
export declare function optional<Type extends ParamType>(type: Type): $expr_OptionalParam<Type>;
export declare type QueryableWithParamsExpression<Set extends TypeSet = TypeSet, Params extends {
    [key: string]: ParamType | $expr_OptionalParam;
} = {}> = Expression<Set> & {
    run(cxn: Executor, args: paramsToParamArgs<Params>): Promise<setToTsType<Set>>;
};
export declare type $expr_WithParams<Params extends {
    [key: string]: ParamType | $expr_OptionalParam;
} = {}, Expr extends Expression = Expression> = QueryableWithParamsExpression<{
    __kind__: ExpressionKind.WithParams;
    __element__: Expr["__element__"];
    __cardinality__: Expr["__cardinality__"];
    __expr__: Expr;
    __paramststype__: paramsToParamTypes<Params>;
}, Params>;
declare type getParamTsType<Param extends ParamType> = Param extends ScalarType ? Param["__tstype__"] : Param extends ArrayType ? Param["__element__"]["__tstype__"][] : never;
declare type paramsToParamTypes<Params extends {
    [key: string]: ParamType | $expr_OptionalParam;
}> = {
    [key in keyof Params]: Params[key] extends $expr_OptionalParam ? getParamTsType<Params[key]["__type__"]> | null : Params[key] extends ParamType ? getParamTsType<Params[key]> : never;
};
declare type paramsToParamArgs<Params extends {
    [key: string]: ParamType | $expr_OptionalParam;
}> = {
    [key in keyof Params as Params[key] extends ParamType ? key : never]: Params[key] extends ParamType ? getParamTsType<Params[key]> : never;
} & {
    [key in keyof Params as Params[key] extends $expr_OptionalParam ? key : never]?: Params[key] extends $expr_OptionalParam ? getParamTsType<Params[key]["__type__"]> | null : never;
};
export declare type $expr_Param<Name extends string | number | symbol = string, Type extends ParamType = ParamType, Optional extends boolean = boolean> = Expression<{
    __kind__: ExpressionKind.Param;
    __element__: Type;
    __cardinality__: Optional extends true ? Cardinality.AtMostOne : Cardinality.One;
    __name__: Name;
}>;
declare type paramsToParamExprs<Params extends {
    [key: string]: ParamType | $expr_OptionalParam;
}> = {
    [key in keyof Params]: Params[key] extends $expr_OptionalParam ? $expr_Param<key, Params[key]["__type__"], true> : Params[key] extends ParamType ? $expr_Param<key, Params[key], false> : never;
};
export declare function withParams<Params extends {
    [key: string]: ParamType | $expr_OptionalParam;
} = {}, Expr extends Expression = Expression>(params: Params, expr: (params: paramsToParamExprs<Params>) => Expr): $expr_WithParams<Params, Expr>;
export {};
